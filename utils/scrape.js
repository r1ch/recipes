const axios = require("axios")
const cheerio = require("cheerio")
const fs = require("fs")

const recipes = [
	"kofta-rogan-josh-curry-62a74447a274505d77010ec2",
	"miso-glazed-salmon-60ed8af58452130fbf4e14b6",
	"pork-larb-604f572e9df6c0562d13b372",
	"korean-inspired-bbq-beef-courgette-ribbons-68a33cba7e1f6c64ca6713b1",
	"pulled-aubergine-and-beef-mince-ragu-689cc40c06d399ea41bc2786",
	"honey-beef-stir-fry-68a33cbcff4c5f79fb5059b9",
	"beef-fillet-steak-wellington-688a2c05b6ffa7a20c3c1beb",
	"sweet-and-spicy-beef-bowl-689cc40d1597ca633109c32a",
	"one-pan-beef-yaki-udon-6895f5459643892dc8fbfbd0",
	"harissa-and-chermoula-spiced-beef-687622325a587f17f458dda9",
	"cheesy-beef-meatballs-in-tomato-sauce-68937b2ccc90c7911daee8e1",
	"beef-shepherds-pie-6890ca1a9643892dc8fadfde",
	"cheesy-beef-chilli-con-carne-688a2c0a9643892dc8fa0f66",
	"honey-beef-stir-fry-68874447b6ffa7a20c3ba4c6",
	"beef-chilli-con-carne-68874443637c1fda3ad8acdf",
	"sweet-and-spicy-beef-bowl-6880dc557299475a5b062da0",
	"spiced-pork-and-rice-larb-6877cb6ec30d33981f9a4054",
	"beef-rogan-josh-68762236a5a49c635d8b254e",
	"beef-rogan-josh-686e6cdbfa13aea4b988bba6",
	"korean-inspired-bbq-beef-courgette-ribbons-68a33cba7e1f6c64ca6713b1",
	"pulled-aubergine-and-beef-mince-ragu-689cc40c06d399ea41bc2786",
	"honey-beef-stir-fry-68a33cbcff4c5f79fb5059b9",
	"beef-fillet-steak-wellington-688a2c05b6ffa7a20c3c1beb",
	"sweet-and-spicy-beef-bowl-689cc40d1597ca633109c32a",
	"one-pan-beef-yaki-udon-6895f5459643892dc8fbfbd0",
	"harissa-and-chermoula-spiced-beef-687622325a587f17f458dda9",
	"cheesy-beef-meatballs-in-tomato-sauce-68937b2ccc90c7911daee8e1",
	"beef-shepherds-pie-6890ca1a9643892dc8fadfde",
	"cheesy-beef-chilli-con-carne-688a2c0a9643892dc8fa0f66",
	"honey-beef-stir-fry-68874447b6ffa7a20c3ba4c6",
	"beef-chilli-con-carne-68874443637c1fda3ad8acdf",
	"sweet-and-spicy-beef-bowl-6880dc557299475a5b062da0",
	"spiced-pork-and-rice-larb-6877cb6ec30d33981f9a4054",
	"beef-rogan-josh-68762236a5a49c635d8b254e",
	"beef-rogan-josh-686e6cdbfa13aea4b988bba6",
	"chermoula-spiced-beef-685ebe22fa95d35ec9724b94",
	"chipotle-beef-lettuce-tacos-6867dca12f6e7575b1587bfa",
	"beef-moussaka-686792321f16566cbfcb4066",
	"hoisin-beef-and-vegetable-stir-fry-6867922a700c002ea14ffaf3",
	"teriyaki-beef-meatballs-6852db7e03a3f86fa0c100f0",
	"bulgogi-beef-mince-on-zesty-rice-685ebe1f2704234ed777af19",
	"sloppy-joe-inspired-beef-lettuce-cups-68554b255bd0c1208002e970",
	"beef-moussaka-685bcd302704234ed7771e71",
	"indonesian-inspired-beef-konjac-noodle-stir-fry-68554b2a5bd0c1208002e978",
	"soboro-inspired-beef-and-sesame-basmati-rice-684ffed503a3f86fa0c07116",
	"beef-moussaka-6852db7d03a3f86fa0c100ed",
	"turkish-inspired-chermoula-spiced-beef-koftas-683586d3d9848b9dac04c7ce",
	"tuscan-inspired-beef-and-spinach-linguine-6842de6bb9b1c59f93d7d229",
	"soboro-inspired-beef-and-sesame-riced-cauliflower-68498ef056532819dcc1b11a",
	"harissa-and-chermoula-spiced-beef-68275e6299bb603b9b435fdf",
	"korean-inspired-bbq-beef-courgette-ribbons-6842de6c5ef6c49c55fd6419",
	"beef-moussaka-68498eee56532819dcc1b117",
	"sweet-and-spicy-beef-bowl-68498eed9f34f686e2db9778",
	"dan-dan-inspired-beef-curry-6842de645ef6c49c55fd640d",
	"beef-moussaka-68408c616329c8e5b722cb35",
	"beef-burger-and-cheesy-truffle-chips-6839a36a42dc4b9281991423",
	"beef-moussaka-6839a35cf7d5496ac4a7844f",
	"chermoula-spiced-beef-681e31b623423d734fc21276",
	"mexican-inspired-spiced-beef-zesty-rice-bowl-682deb21c4a648afcad0dce4",
	"indonesian-inspired-beef-konjac-noodle-stir-fry-6815054ea6365358db00f1fc",
	"lemongrass-sticky-beef-and-crispy-onions-682deb2d97a36a9824b52314",
	"beef-moussaka-682deb1dc4a648afcad0dcdc",
	"honey-pork-stir-fry-6824a19ee8cfeb704a4729d5",
	"beef-moussaka-6824a192b511ee4a266be666",
	"chipotle-beef-lettuce-tacos-681e31b4f5ad8e6534c4cf0a",
	"hoisin-beef-and-vegetable-stir-fry-681ca4b035963fcd98f3f112",
	"beef-moussaka-681ca49ef5ad8e6534c479dc",
	"sloppy-joe-inspired-beef-lettuce-cups-67f3a819b777f3317f549813",
	"dan-dan-inspired-beef-noodles-6811efb75917498f8bf2e655",
	"beef-moussaka-6811efab05fc1830ec44fd57",
	"korean-inspired-bbq-beef-courgette-ribbons-67fccf9efe44baceeadf76f1",
	"one-pan-beef-yaki-udon-680baed29543e3aa400545b3",
	"beef-moussaka-6809119ade3861faddf5a2bd",
	"central-thai-inspired-beef-mince-stir-fry-67e6a589cb1504eb892dab83",
	"coconut-cashew-tantanmen-inspired-beef-ramen-680760cfba6118bd6bcc9579",
	"sweet-and-spicy-beef-bowl-6800caf9ba6118bd6bcc526b",
	"beef-moussaka-6800cae55886e6cfbf376aee",
	"rich-beef-ragu-on-a-bed-of-courgetti-67fccf9ba3ffaf7fe874d485",
	"tuscan-inspired-beef-and-spinach-linguine-67e6a58acb1504eb892dab85",
	"beef-burger-and-cheesy-truffle-chips-67f7c614d59d59ad2ddb582c",
	"cheesy-beef-chilli-con-carne-67f7c604d59d59ad2ddb580a",
	"harissa-and-chermoula-spiced-beef-67d93c5f3a0a3d1cca035e87",
	"mexican-inspired-spiced-beef-zesty-rice-bowl-67ed5f61d1bc9d2bb2b9c376",
	"spicy-beef-and-ricotta-meatballs-and-courgette-ribbons-67f3a81c87ee9ef44a290dbe",
	"beef-moussaka-67ed5f6ed1bc9d2bb2b9c389",
	"chipotle-beef-bowl-67e5363cf59be9ad8dcc7600",
	"cheesy-beef-meatball-marinara-67e145bc28286465fbdf9d64",
	"cheese-topped-bunless-beef-burgers-67daf734253650f846690ce9",
	"chinese-inspired-ginger-beef-soup-67d93c5e859430068bc51da5",
	"cheesy-beef-meatballs-in-tomato-sauce-67d1b8f4e4321b3b6ef33a8d",
	"chipotle-beef-and-butternut-squash-chilli-67c062ef9d75dd14bb52bae2",
	"indonesian-inspired-beef-konjac-noodle-stir-fry-67c965be5c81f633eb6f3905",
	"dan-dan-inspired-beef-curry-67cb177f849ab09a45ce2921",
	"spicy-mexican-inspired-creamy-beef-one-pot-67c886428f112f54d1d768e6",
	"lemongrass-sticky-beef-and-crispy-onions-67c8863d79182248c9318bd3",
	"beef-thai-larb-inspired-cauliflower-rice-bowl-67a622daceafcc38a347a625",
	"korean-inspired-bbq-beef-courgette-ribbons-67b8781599599f9d8e3dc4dc",
	"mexican-inspired-spicy-beef-bowl-67c062fa9d75dd14bb52baf0",
	"spicy-tagine-inspired-beef-meatball-stew-67b5ecc2d18400b3ca3a32ea",
	"chipotle-beef-lettuce-tacos-67b8781499599f9d8e3dc4d9",
	"spiced-beef-burrito-bowl-67af52d00309763fb74d72a2",
	"beef-moussaka-67acc108e602c94fd1c2812d",
	"beef-rump-steak-and-chimichurri-sauce-67acc102188b832ab6841c9e",
	"tuscan-inspired-beef-and-spinach-linguine-67a36a4af5f1773a0107cad9",
	"pad-kra-pao-inspired-beef-mince-stir-fry-6793a58a3357e10ed3034cf9",
	"dan-dan-inspired-beef-mince-stir-fry-67a35f67f5f1773a0107c7d6",
	"one-pan-beef-yaki-udon-6784edea8df7073882b25e53",
	"hoisin-beef-and-vegetable-stir-fry-67a35f60f5f1773a0107c7bd",
	"soboro-inspired-beef-and-sesame-riced-cauliflower-679a51b133196a355d1e3416",
	"red-wine-beef-and-cheesy-celeriac-mash-pie-6777fea452032df0a379092e",
	"sweet-and-spicy-beef-bowl-679a51aa33196a355d1e3404",
	"chinese-inspired-spicy-beef-konjac-noodles-679a4f5b33196a355d1e3390",
	"yellow-thai-inspired-beef-meatball-laksa-6793a5895fbdb4aa73bc5c3b",
	"korean-inspired-spicy-gochujang-beef-stir-fry-6787e7c74fe9867a5d6ebf38",
	"spicy-mexican-inspired-beef-and-aubergine-bake-677693cc0200888b9f0fb8ab",
	"blue-cheese-topped-beef-pie-677e866b9bad0bb45fbd639d",
	"chipotle-beef-and-butternut-squash-chilli-677693df0200888b9f0fb8c6",
	"spicy-beef-and-ricotta-meatballs-and-courgette-ribbons-678a30317767bb70db190a70",
	"pad-kra-pao-moo-inspired-beef-mince-stir-fry-6769575b9905c923d7fd6cbd",
	"dan-dan-inspired-beef-noodles-6787e7c006d8a534f0e44c27",
	"dan-dan-inspired-beef-mince-stir-fry-67604790f511d87afd23f6f3",
	"coconut-cashew-tantanmen-inspired-beef-ramen-6784edeb8df7073882b25e57",
	"chinese-inspired-ginger-beef-soup-6784ede98df7073882b25e50",
	"mustard-and-herb-crusted-roast-beef-677e866a119b1cbfa3efb1e4",
	"cheesy-beef-meatballs-in-tomato-sauce-677e86659bad0bb45fbd6394",
	"sticky-hoisin-beef-bao-buns-677693d61d65e30dd0891999",
	"lemongrass-sticky-beef-and-crispy-onions-677693d41d65e30dd0891993",
	"spicy-mexican-inspired-creamy-beef-one-pot-676047cbd1e807b4c4b24127",
	"beef-chilli-con-carne-676957610200888b9f0f4538",
	"rich-beef-ragu-on-a-bed-of-courgetti-676957599905c923d7fd6cb7",
	"hoisin-beef-stir-fry-6760479cd1e807b4c4b24105",
	"cheesy-beef-chilli-con-carne-6759b792a1a7f6303a776f31",
	"pulled-beef-in-a-red-wine-jus-6759b78ea1a7f6303a776f26",
	"parsnip-and-carrot-rosti-style-beef-pie-6759b78ea1a7f6303a776f29",
	"dan-dan-inspired-beef-curry-6759a052a1a7f6303a776b2f",
	"spicy-gochujang-beef-and-courgette-ribbons-67503029a54a6122a42d29ad",
	"tuscan-inspired-beef-and-spinach-linguine-6750302da54a6122a42d29b5",
	"honey-pork-stir-fry-675078566188c2d1af7a7488",
	"beef-moussaka-6750784c6188c2d1af7a7474",
	"chermoula-spiced-beef-685ebe22fa95d35ec9724b94",
	"chipotle-beef-lettuce-tacos-6867dca12f6e7575b1587bfa",
	"beef-moussaka-686792321f16566cbfcb4066",
	"hoisin-beef-and-vegetable-stir-fry-6867922a700c002ea14ffaf3",
	"teriyaki-beef-meatballs-6852db7e03a3f86fa0c100f0",
	"bulgogi-beef-mince-on-zesty-rice-685ebe1f2704234ed777af19",
	"sloppy-joe-inspired-beef-lettuce-cups-68554b255bd0c1208002e970",
	"beef-moussaka-685bcd302704234ed7771e71",
	"indonesian-inspired-beef-konjac-noodle-stir-fry-68554b2a5bd0c1208002e978",
	"soboro-inspired-beef-and-sesame-basmati-rice-684ffed503a3f86fa0c07116",
	"beef-moussaka-6852db7d03a3f86fa0c100ed",
	"turkish-inspired-chermoula-spiced-beef-koftas-683586d3d9848b9dac04c7ce",
	"tuscan-inspired-beef-and-spinach-linguine-6842de6bb9b1c59f93d7d229",
	"soboro-inspired-beef-and-sesame-riced-cauliflower-68498ef056532819dcc1b11a",
	"harissa-and-chermoula-spiced-beef-68275e6299bb603b9b435fdf",
	"korean-inspired-bbq-beef-courgette-ribbons-6842de6c5ef6c49c55fd6419",
	"beef-moussaka-68498eee56532819dcc1b117",
	"sweet-and-spicy-beef-bowl-68498eed9f34f686e2db9778",
	"dan-dan-inspired-beef-curry-6842de645ef6c49c55fd640d",
	"beef-moussaka-68408c616329c8e5b722cb35",
	"beef-burger-and-cheesy-truffle-chips-6839a36a42dc4b9281991423",
	"beef-moussaka-6839a35cf7d5496ac4a7844f",
	"chermoula-spiced-beef-681e31b623423d734fc21276",
	"mexican-inspired-spiced-beef-zesty-rice-bowl-682deb21c4a648afcad0dce4",
	"indonesian-inspired-beef-konjac-noodle-stir-fry-6815054ea6365358db00f1fc",
	"lemongrass-sticky-beef-and-crispy-onions-682deb2d97a36a9824b52314",
	"beef-moussaka-682deb1dc4a648afcad0dcdc",
	"honey-pork-stir-fry-6824a19ee8cfeb704a4729d5",
	"beef-moussaka-6824a192b511ee4a266be666",
	"chipotle-beef-lettuce-tacos-681e31b4f5ad8e6534c4cf0a",
	"hoisin-beef-and-vegetable-stir-fry-681ca4b035963fcd98f3f112",
	"beef-moussaka-681ca49ef5ad8e6534c479dc",
	"sloppy-joe-inspired-beef-lettuce-cups-67f3a819b777f3317f549813",
	"dan-dan-inspired-beef-noodles-6811efb75917498f8bf2e655",
	"beef-moussaka-6811efab05fc1830ec44fd57",
	"korean-inspired-bbq-beef-courgette-ribbons-67fccf9efe44baceeadf76f1",
	"one-pan-beef-yaki-udon-680baed29543e3aa400545b3",
	"beef-moussaka-6809119ade3861faddf5a2bd",
	"central-thai-inspired-beef-mince-stir-fry-67e6a589cb1504eb892dab83",
	"coconut-cashew-tantanmen-inspired-beef-ramen-680760cfba6118bd6bcc9579",
	"sweet-and-spicy-beef-bowl-6800caf9ba6118bd6bcc526b",
	"beef-moussaka-6800cae55886e6cfbf376aee",
	"rich-beef-ragu-on-a-bed-of-courgetti-67fccf9ba3ffaf7fe874d485",
	"tuscan-inspired-beef-and-spinach-linguine-67e6a58acb1504eb892dab85",
	"beef-burger-and-cheesy-truffle-chips-67f7c614d59d59ad2ddb582c",
	"cheesy-beef-chilli-con-carne-67f7c604d59d59ad2ddb580a",
	"harissa-and-chermoula-spiced-beef-67d93c5f3a0a3d1cca035e87",
	"mexican-inspired-spiced-beef-zesty-rice-bowl-67ed5f61d1bc9d2bb2b9c376",
	"spicy-beef-and-ricotta-meatballs-and-courgette-ribbons-67f3a81c87ee9ef44a290dbe",
	"beef-moussaka-67ed5f6ed1bc9d2bb2b9c389",
	"chipotle-beef-bowl-67e5363cf59be9ad8dcc7600",
	"cheesy-beef-meatball-marinara-67e145bc28286465fbdf9d64",
	"cheese-topped-bunless-beef-burgers-67daf734253650f846690ce9",
	"chinese-inspired-ginger-beef-soup-67d93c5e859430068bc51da5",
	"cheesy-beef-meatballs-in-tomato-sauce-67d1b8f4e4321b3b6ef33a8d",
	"chipotle-beef-and-butternut-squash-chilli-67c062ef9d75dd14bb52bae2",
	"indonesian-inspired-beef-konjac-noodle-stir-fry-67c965be5c81f633eb6f3905",
	"dan-dan-inspired-beef-curry-67cb177f849ab09a45ce2921",
	"spicy-mexican-inspired-creamy-beef-one-pot-67c886428f112f54d1d768e6",
	"lemongrass-sticky-beef-and-crispy-onions-67c8863d79182248c9318bd3",
	"beef-thai-larb-inspired-cauliflower-rice-bowl-67a622daceafcc38a347a625",
	"korean-inspired-bbq-beef-courgette-ribbons-67b8781599599f9d8e3dc4dc",
	"mexican-inspired-spicy-beef-bowl-67c062fa9d75dd14bb52baf0",
	"spicy-tagine-inspired-beef-meatball-stew-67b5ecc2d18400b3ca3a32ea",
	"chipotle-beef-lettuce-tacos-67b8781499599f9d8e3dc4d9",
	"spiced-beef-burrito-bowl-67af52d00309763fb74d72a2",
	"beef-moussaka-67acc108e602c94fd1c2812d",
	"beef-rump-steak-and-chimichurri-sauce-67acc102188b832ab6841c9e",
	"tuscan-inspired-beef-and-spinach-linguine-67a36a4af5f1773a0107cad9",
	"pad-kra-pao-inspired-beef-mince-stir-fry-6793a58a3357e10ed3034cf9",
	"dan-dan-inspired-beef-mince-stir-fry-67a35f67f5f1773a0107c7d6",
	"one-pan-beef-yaki-udon-6784edea8df7073882b25e53",
	"hoisin-beef-and-vegetable-stir-fry-67a35f60f5f1773a0107c7bd",
	"soboro-inspired-beef-and-sesame-riced-cauliflower-679a51b133196a355d1e3416",
	"red-wine-beef-and-cheesy-celeriac-mash-pie-6777fea452032df0a379092e",
	"sweet-and-spicy-beef-bowl-679a51aa33196a355d1e3404",
	"chinese-inspired-spicy-beef-konjac-noodles-679a4f5b33196a355d1e3390",
	"yellow-thai-inspired-beef-meatball-laksa-6793a5895fbdb4aa73bc5c3b",
	"korean-inspired-spicy-gochujang-beef-stir-fry-6787e7c74fe9867a5d6ebf38",
	"spicy-mexican-inspired-beef-and-aubergine-bake-677693cc0200888b9f0fb8ab",
	"blue-cheese-topped-beef-pie-677e866b9bad0bb45fbd639d",
	"chipotle-beef-and-butternut-squash-chilli-677693df0200888b9f0fb8c6",
	"spicy-beef-and-ricotta-meatballs-and-courgette-ribbons-678a30317767bb70db190a70",
	"pad-kra-pao-moo-inspired-beef-mince-stir-fry-6769575b9905c923d7fd6cbd",
	"dan-dan-inspired-beef-noodles-6787e7c006d8a534f0e44c27",
	"dan-dan-inspired-beef-mince-stir-fry-67604790f511d87afd23f6f3",
	"coconut-cashew-tantanmen-inspired-beef-ramen-6784edeb8df7073882b25e57",
	"chinese-inspired-ginger-beef-soup-6784ede98df7073882b25e50",
	"mustard-and-herb-crusted-roast-beef-677e866a119b1cbfa3efb1e4",
	"cheesy-beef-meatballs-in-tomato-sauce-677e86659bad0bb45fbd6394",
	"sticky-hoisin-beef-bao-buns-677693d61d65e30dd0891999",
	"lemongrass-sticky-beef-and-crispy-onions-677693d41d65e30dd0891993",
	"spicy-mexican-inspired-creamy-beef-one-pot-676047cbd1e807b4c4b24127",
	"beef-chilli-con-carne-676957610200888b9f0f4538",
	"rich-beef-ragu-on-a-bed-of-courgetti-676957599905c923d7fd6cb7",
	"hoisin-beef-stir-fry-6760479cd1e807b4c4b24105",
	"cheesy-beef-chilli-con-carne-6759b792a1a7f6303a776f31",
	"pulled-beef-in-a-red-wine-jus-6759b78ea1a7f6303a776f26",
	"parsnip-and-carrot-rosti-style-beef-pie-6759b78ea1a7f6303a776f29",
	"dan-dan-inspired-beef-curry-6759a052a1a7f6303a776b2f",
	"spicy-gochujang-beef-and-courgette-ribbons-67503029a54a6122a42d29ad",
	"tuscan-inspired-beef-and-spinach-linguine-6750302da54a6122a42d29b5",
	"honey-pork-stir-fry-675078566188c2d1af7a7488",
	"beef-moussaka-6750784c6188c2d1af7a7474"
]
const URL = recipe => `https://www.greenchef.co.uk/recipes/${recipe}`


async function scrape(recipe){
	try {
		if(fs.existsSync(`../_data/${recipe}.json`)){
			console.log("Already have",recipe)
			return "OK"
		}
		const {data: html} = await axios.get(URL(recipe))
		const $ = cheerio.load(html)

		const scriptTag = $("#__NEXT_DATA__").html()

		if(scriptTag){
			const jsonData = JSON.parse(scriptTag)
			const recipeData = jsonData
			.props.pageProps.ssrPayload.dehydratedState.queries
			.find(q=>q.queryKey.includes("recipe.byId"))
			?.state?.data
			
			fs.writeFileSync(`../_data/${recipe}.json`, JSON.stringify(recipeData,null,2),"utf-8")
			console.log("Wrote",recipe)
			return "OK"
		} else {
			console.error("No script tag")
			return "Error"
		}

	} catch (err){
		console.error("Scrape error",err.message)
		return "Error"
	}
}

Promise.all(recipes.map(r=>scrape(r)))
.then(console.log)
